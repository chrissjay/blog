---
title: "J2EE编程之servlet"
catalog: true
date: 2019-07-1 22:01:40
subtitle: "This is about Spring."
header-img: "Demo.png"
tags:
- Spring
catagories:
- Spring
---

# Spring

## 1.基础概念

简单来说，Spring是一个分层的JavaSE/EE full-stack(一站式) 轻量级开源框架。

1. 轻量级：与EJB(enterprise javabean ,企业级javabean)对比，依赖资源少，销毁的资源少。

2. 分层： 一站式，每一个层都提供的解决方案



## 2.核心思想

### 1. IOC (Inversion of Control，控制反转)（注解/xml）

当一个对象创建时, 它所依赖的对象由外部传递给他, 而非自己去创建所依赖的对象(比如通过new操作). 因此,也可以说在对象如何获取他所依赖的对象这件事情上, 控制权反转了

最直观的表达就是，IOC让对象的创建不用去new了，可以由spring自动生产，使用java的反射机制，根据配置文件在运行时动态的去创建对象以及管理对象，并调用对象的方法

IoC 和 DI（依赖注入） 其实是同一个概念的不同角度描述，DI 相对 IoC 而言，**明确描述了“被注入对象依赖 IoC 容器配置依赖对象”**

**依赖**：一个对象完成业务功能需要依赖另一个对象,比如service功能需要依赖于dao

**注入：**就是在获取一个对象时,该对象所依赖的实例已经由spring替我们分配了



1. **IOC**初始化过程：
   资源定位，即定义bean的xml-------》载入--------》IOC容器注册，注册beanDefinition
2. IOC容器的初始化过程，一般不包含bean的依赖注入的实现，在spring IOC设计中，bean的注册和依赖注入是两个过程，依赖注入一般发生在应用第一次索取bean的时候，但是也可以在xm中配置，在容器初始化的时候，这个bean就完成了初始化。
3. 三种注入方式，构造器、接口、set注入，我们常用的是set注入
4. bean是如何创建：工厂模式



### 2.AOP(Aspect Oriented Programming，面向切面编程)

AOP的OOP的延续,是spring框架中的一个热点和优势,利用AOP可以对业务的各个部分进行隔离,从而使得业务逻辑各个部分之间的耦合度降低.提高代码的复用性,同时提高开发效率

**用于将那些与业务无关，但却对多个对象产生影响的公共行为和逻辑，抽取并封装为一个可重用的模块，这个模块被命名为“切面”（Aspect）**

AOP采取了横向抽取的机制,取代了传统纵向继承体系的重复性代码

应用场景:日志, 事务管理, 缓存, 性能检测等

AOP实现的关键在于 代理模式，AOP代理主要分为静态代理和动态代理。静态代理的代表为AspectJ；动态代理则以Spring AOP为代表。

（1）AspectJ是静态代理的增强，所谓静态代理，就是AOP框架会在编译阶段生成AOP代理类，因此也称为编译时增强，他会在编译阶段将AspectJ(切面)织入到Java字节码中，运行的时候就是增强之后的AOP对象。

（2）Spring AOP使用的动态代理，所谓的动态代理就是说AOP框架不会去修改字节码，而是每次运行时在内存中临时为方法生成一个AOP对象，这个AOP对象包含了目标对象的全部方法，并且在特定的切点做了增强处理，并回调原对象的方法。



## 3.优点

### 1.方便解耦，简化开发(高内聚低耦合)

1. Spring就是一个大工厂(容器)，可以将所有对象创建和依赖关系维护，交给Spring管理

2. spring工厂是用于生成bean


### 2.AOP编程的支持

Spring提供面向切面编程，可以方便的实现对程序进行权限拦截、运行监控等功能

### 3.声明式事务的支持

只需要通过配置就可以完成对事务的管理，而无需手动编程

### 4.方便程序的测试

Spring对Junit4支持，可以通过注解方便的测试Spring程序

### 5.方便集成各种优秀框架

Spring不排斥各种优秀的开源框架，其内部提供了对各种优秀框架（如：Struts、Hibernate、MyBatis、Quartz等）的直接支持

### 6.降低JavaEE API的使用难度

Spring 对JavaEE开发中非常难用的一些API（JDBC、JavaMail、远程调用等），都提供了封装，使这些API应用难度大大降低